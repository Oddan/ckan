{% extends "edit_metadata.html" %} 
{% import 'macros/form.html' as form %}
{% set errors = errors or {} %}
{% set name = g.cur_item['name'] or "" %}
{% set description = g.cur_item['description'] or "" %}
{% set isopen = g.cur_item['is_open'] or False %}


{% block primary_content_inner %}
{{ super() }}

{% block errors %}{{ form.errors(error_summary) }}{% endblock %}

  <h2 class="hide-heading">{{_('DataFormat')}}</h2>
  <h2>Edit Dataformats</h2> 

<div class="list-group pre-scrollable col-sm-4">
  
  <p> <em>Select from list, or &lt;<em>New</em>&gt to insert new item.</em></p>
  <li class="list-group-item">
    <a href={{ h.url_for('edit_dataformat', new=true) }}>&lt;<em>New</em>&gt;</a>
  </li>

  {% for item in g.items %}
    <li class="list-group-item">
      <a href={{ h.url_for('edit_dataformat', id=item[0]) }} > {{ item[1] }} </a>
    </li>
  {% endfor %}
</div>

{% if g.pkg_dict['new'] or g.pkg_dict['id'] %}
{% set dataformat_id = g.pkg_dict['id'] or '' %} 
  <form id="edit-dataformat" class="dataset-form col-sm-6" method="post"
        action={{ h.url_for('edit_dataformat') }} data-module="basic-form">

      {{ form.input('name', id='field-name', label=_('Name'), value=name, error=errors.name,
                    classes=['control-full'], is_required=true) }}

      {{ form.checkbox('is-open', checked=isopen, label=_('Format is open (nonproprietary)'),
                       id='field-is-open', value=true, error=errors.is_open, 
                       classes=['control-small']) }}

      {{ form.markdown('description', id='field-description', label=_('Description'), value=description,
         placeholder='Consider including links to open processing software',
         error=errors.description, classes=['control-full'], is_required=true) }}

      <div class="form-actions">
        <button class="btn btn-danger pull-left"
                name="delete"
                data-module="confirm-action"
                data-module-content="{{_("Are you sure you want to delete this item?")}}"
                value="{{dataformat_id}}"
                type="submit">
                Delete
        </button>
        <button class="btn btn-primary"
                name="save"
                value="{{dataformat_id}}"
                type="submit">
                Submit
        </button>
      </div>
</form>

{% endif %}

{% endblock %} 

